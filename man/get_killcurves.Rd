% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_killcurves.r
\name{get_killcurves}
\alias{get_killcurves}
\title{Generate Kill Curves from Cell Data}
\usage{
get_killcurves(
  d,
  well_info = list(well_data_or_path, wells_to_ignore),
  file_info_pattern = list(split = "_", keep = c(1, 4, 5)),
  fill_missing_counts = list(key_cols = c("file", "frame", "channel", "experiment",
    "well", "field", "row", "col"), count_cols = c("total_count", "pi_class_neg",
    "pi_class_pos", "area_pineg", "area_pipos", "area_total")),
  group_killcurves_by = c("file"),
  max_time = 72,
  n_frames = 29
)
}
\arguments{
\item{d}{A data.table containing the cell tracking data with required columns:
timestep, frame, file, object_class, pi_class_pos, total_count}

\item{file_info_pattern}{A list with components:
\itemize{
\item split: Character used to split filenames (default: "_")
\item keep: Vector of indices of split elements to keep (default: c(1, 4, 5))
}}

\item{fill_missing_counts}{A list with components:
\itemize{
\item key_cols: Columns to use as keys when filling missing data
(default: c("file", "frame", "channel", "experiment", "well", "field", "row", "col", "well_info"))
\item count_cols: Count columns to fill with zeros
(default: c("total_count", "pi_class_neg", "pi_class_pos", "area_pineg", "area_pipos", "area_total"))
}}

\item{group_killcurves_by}{Vector of column names to group by when calculating kill curves
(default: c("file"))}

\item{max_time}{Maximum time point to process in hours (default: 72)}

\item{n_frames}{Maximum number of frames to process (default: 29)}
}
\value{
A data.table containing processed single-cell data with calculated kill curves.
Key added columns include:
\itemize{
\item pi_frac: Fraction of PI-positive (dead) cells
\item live_frac: Fraction of living cells (1 - pi_frac)
\item interpolated_t: Interpolated time points
\item interpolated_live_frac: Interpolated live cell fractions
\item norm_live_frac: Normalized live cell fractions
}
}
\description{
Processes summary imaging data from the ASCT to calculate and interpolate kill curves based on PI (propidium iodide) staining.
This function extracts metadata from filenames, calculates live/dead cell fractions, and generates
normalized and interpolated kill curves.
}
\details{
The function performs the following steps:
\enumerate{
\item Validates input data and parameters
\item Extracts experiment, well, and field information from filenames
\item Fills missing data points if needed
\item Calculates PI-positive fractions (indicating dead cells)
\item Derives live cell fractions
\item Interpolates live cell fractions over time
\item Normalizes live cell fractions
\item Enforces monotonic decrease in live cell fraction (biological constraint)
}
}
\examples{
\dontrun{
# Assuming 'cell_data' is a data.table with the required columns
kill_curves <- get_killcurves(
  d = cell_data,
  max_time = 48,
  n_frames = 25
)
}

}
